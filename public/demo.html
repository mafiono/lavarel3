<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demo</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-7s5uDGW3AHqw6xtJmNNtr+OBRJUlgkNJEo78P4b0yRw= sha512-nNo+yCHEyn0smMxSswnf/OnX6/KwJuZTlNZBjauKhTK0c+zT+q5JOCx0UFhXQ6rJR9jg6Es8gPuD2uZcYDLqSw==" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha256-KXn5puMvxCw+dAYznun+drMdG1IFl3agK0p/pqT9KAo= sha512-2e8qq0ETcfWRI4HJBzQiA3UoyFk6tbNyG+qSaIBZLyW9Xf3sWZHN/lxe9fTh1U45DpPf07yj94KsUHHWe4Yk1A==" crossorigin="anonymous"></script>

    <style>
    </style>
    </head>
<body>
    <div>
        <div id="sports" style="display: inline-block; width: 40%; border: 1px solid black;"></div>
        <div id="games" style="display: inline-block; width: 50%; border: 1px solid black; vertical-align: top"></div>
    </div>
<script>
    populateSports();

    function populateSports() {
        var args = {
            "what": '{\
                "sport" : [],\
                "region" : [],\
                "competition" : []\
            }', "where": '{\
                "sport" : {"id" : 844},\
                "game" : {"type" : 0},\
                "market" : {"type": "P1XP2"}\
            }'
        };
        $.get("http://ibetup.co.uk/bc", args).done(function (data) {
            var response = JSON.parse(data);
            var sportsContainer = $("#sports");
            var sports = response.data.data.sport;
            var html = "<ul>";
            for (var sportKey in sports) {
                html += "<li>"+sports[sportKey].name;
                html += "<ul>";
                var regions = sports[sportKey].region;
                for (var regionKey in regions) {
                    html += "<li>"+regions[regionKey].name;
                    html += "<ul>";
                    var competitions = regions[regionKey].competition;
                    for (var competitionKey in competitions) {
                        html += "<li onclick='competitionClick("+competitions[competitionKey].id+")' style='text-decoration: underline; cursor: pointer;'>"+competitions[competitionKey].name;
                        html += "</li>";
                    }
                    html += "</ul>";
                    html += "</li>";

                }
                html += "</ul>";
                html += "</li>";
            }
            html += "</ul>";
            sportsContainer.html(html);
        });
    }

    function competitionClick(competitionId) {
        var args = {
            "what": '{\
                "game" : [],\
                "market" : [],\
                "event" : []\
            }', "where": '{\
                "competition" : {"id" : '+competitionId+'},\
                "game" : {"type" : 0},\
                "market" : {"type": "P1XP2"}\
            }'
        };
        $.get("http://ibetup.co.uk/bc", args).done(function (data) {
            var response = JSON.parse(data);
            var gamesContainer = $("#games");
            var games = response.data.data.game;
            var html = "<table>";
            html += "<tr><td>1</td><td>X</td><td>2</td></tr>";
            for (var gameKey in games) {
                html += "<tr><td colspan='3'>"+games[gameKey].team1_name+" - "+games[gameKey].team2_name+"</td></tr>";
                var events = null;
                for (var marketKey in games[gameKey].market)
                    events = games[gameKey].market[marketKey].event;
                html += "<tr>";
                for (var eventKey in events)
                    html += "<td>"+events[eventKey].price+"</td>";
                html += "</tr>";
            }
            html += "</table>";
            gamesContainer.html(html);
        });
    }

</script>
</body>
</html>