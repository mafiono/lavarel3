Handlebars.registerPartial("sports_menu",'    <ul>        {{#each sports}}            <li class="level1">                <div class="menu1-option sportsMenu-box-sport" data-sport-id="{{id}}" data-sport-name="{{name}}">                    <span class="sportsMenu-text sport expand">&nbsp;<i class="i1 fa fa-plus sportsMenu-icon-sport expand"></i></span>                    <span class="n1 sportsMenu-text-sport"><i class="fa fa-futbol-o" aria-hidden="true"></i> &nbsp; {{this.name}}</span>                </div>                <ul></ul>            </li>        {{/each}}    </ul>'),Handlebars.registerPartial("regions_submenu",'    {{#each regions}}        <li class="level2">             <div class="menu2-option sportsMenu-box menu region" data-region-id="{{id}}" data-region-name="{{name}}">                <span class="sportsMenu-text-region count">{{this.competition_count}}</span>                <i class="i2 fa fa-caret-down sportsMenu-icon-region-selected hidden"></i>                <span class="n2 sportsMenu-text-region">{{this.name}}</span>            </div>            <ul></ul>        </li>    {{/each}}'),Handlebars.registerPartial("competitions_submenu",'    {{#each competitions}}        <li class="level3" data-competition-id="{{this.id}}" data-competition-name="{{name}}">            <div class="menu3-option sportsMenu-box menu competition">                <span class="sportsMenu-text competition expand">&nbsp;<i class="i3 fa fa-caret-right hidden"></i></span>                <span class="n3 sportsMenu-text competition">{{this.name}}</span>            </div>        </li>    {{/each}}'),Handlebars.registerPartial("highlights_submenu",'    {{#each competitions}}        <div class="sportsMenu-box-highlights-submenu" data-competition-id="{{id}}" data-competition-name="{{name}}" data-type="highlight">{{name}}</div>    {{/each}}'),Handlebars.registerPartial("fixtures",'    <table class="markets-table">        <tr class="markets-tr header">            <th class="markets-th date">&nbsp;</th>            <th class="markets-th game">&nbsp;</th>            <th class="markets-th favorite">&nbsp;</th>            <th class="markets-th statistics">&nbsp;</th>            <th class="markets-th separator">&nbsp;</th>            <th class="markets-th selection">1</th>            <th class="markets-th separator onePx"></th>            <th class="markets-th selection">X</th>            <th class="markets-th separator onePx"></th>            <th class="markets-th selection">2</th>            <th class="markets-th separator">&nbsp;</th>            <th class="markets-th marketCount">&nbsp;</th>        </tr>        {{#each fixtures}}            <tr class="markets-tr">                <td class="markets-td date {{parity @index}}">{{date}}<br>{{time}}</td>                <td class="markets-td game {{parity @index}}" data-game-id="{{id}}" data-type="fixture">{{name}}</td>                <td class="markets-td favorite {{parity @index}}">{{> favorite}}</td>                <td class="markets-td statistics {{parity @index}}">{{> statistics}}</td>                <td class="markets-td separator">&nbsp;</td>                {{#each markets}}                    {{#if_in market_type_id "2,306"}}                        {{> get_selection outcomeId=1 fixture=.. index=@../index}}                    {{/if_in}}                    {{#if_eq market_type_id 322}}                        {{> get_selection outcomeId=25 fixture=.. index=@../index}}                    {{/if_eq}}                    <td class="markets-th separator onePx"></td>                        {{> get_selection outcomeId=2 fixture=.. index=@../index}}                    <td class="markets-th separator onePx"></td>                    {{#if_in market_type_id "2,306"}}                        {{> get_selection outcomeId=3 fixture=.. index=@../index}}                    {{/if_in}}                    {{#if_eq market_type_id 322}}                        {{> get_selection outcomeId=26 fixture=.. index=@../index}}                    {{/if_eq}}                {{/each}}                <td class="markets-td separator">&nbsp;</td>                <td class="markets-td-marketsCount {{parity @index}}">+{{markets_count}}</td>            </tr>        {{/each}}    </table>'),Handlebars.registerPartial("get_selection",'    <td class="markets-td selection {{type}} {{parity index}}">        {{#each selections}}            {{#if_eq outcome.id ../outcomeId}}                {{> selection fixture=../fixture market=..}}            {{/if_eq}}        {{/each}}    </td>'),Handlebars.registerPartial("get_selection_name","    {{#each selections}}        {{#if_eq outcome.id ../outcome}}            {{name}}        {{/if_eq}}    {{/each}}"),Handlebars.registerPartial("selection",'    {{#if_eq trading_status "Trading"}}        <button class="markets-button selection"            data-game-id="{{fixture.id}}"            data-game-name="{{fixture.name}}"            data-game-date="{{fixture.start_time_utc}}"            data-event-id="{{id}}"            data-event-name="            {{#if_eq market.market_type.is_handicap 1}}                {{market.handicap}} -             {{/if_eq}}            {{name}}"            data-event-price="{{decimal}}"            data-market-id="{{market.id}}"            data-market-name="{{market.market_type.name}}"            data-type="odds">            {{decimal}}        </button>    {{/if_eq}}'),Handlebars.registerPartial("favorite",'    <button id="favorite-button-{{id}}"        class="fa fa-star markets-button-favorite"        data-game-id="{{id}}"        data-game-name="{{name}}"        data-game-date="{{start_time_utc}}"        data-type="favorite">     </button>'),Handlebars.registerPartial("statistics",'    <button id="statistics-{{id}}"        class="fa fa-bar-chart markets-button statistics"        data-game-id="{{id}}"        data-game-name="{{name}}"        data-game-date="{{start_time_utc}}"        data-game-sport=""        data-selected-css="markets-text statistics selected"        data-type="statistics">     </button>'),Handlebars.registerPartial("markets_navigation",'    <div class="markets-box navigation">        {{#if_eq operation "Favoritos"}}            <span class="markets-text navigation selected">{{operation}}</span>        {{/if_eq}}        {{#if_eq operation "Pesquisa"}}            {{operation}} &nbsp;<i class="fa fa-caret-right"></i>&nbsp;             <span class="markets-text navigation selected">{{query}}</span>        {{/if_eq}}        {{#if_eq operation "Destaques"}}            {{operation}} &nbsp;<i class="fa fa-caret-right"></i>&nbsp;             <span class="markets-text navigation selected">{{competition}}</span>        {{/if_eq}}        {{#if_eq operation "Competition"}}            {{sport}} &nbsp;<i class="fa fa-caret-right"></i>&nbsp;             {{region}} &nbsp;<i class="fa fa-caret-right"></i>&nbsp;             <span class="markets-text navigation selected">{{competition}}</span>        {{/if_eq}}    </div>'),Handlebars.registerPartial("fixture_markets",'    {{#each fixtures}}        {{> markets_navigation sport=../sport region=../region competition=../competition fixture=name}}        <div class="markets-content">            <div class="markets-box markets header">                <span class="markets-text markets header">{{name}}</span>                <button id="markets-hide" class="markets-button markets close">                    <i class="fa fa-times" aria-hidden="true"></i>                </button>            </div>            {{> market_singleRow type=2 outcomes=../outcomes}}            {{> market_singleRow type=306 outcomes=../outcomes}}            {{> market_singleRow type=322 outcomes=../outcomes}}            {{> market_multiRow type=259 outcomes=../outcomes}}            {{> market_multiRow type=105 outcomes=../outcomes}}            {{> market_singleRow type=122 outcomes=../outcomes}}            {{> market_singleRow type=7202 outcomes=../outcomes}}            {{> market_singleRow type=25 outcomes=../outcomes}}            {{> market_singleRow type=60 outcomes=../outcomes}}            {{> market_singleRow type=62 outcomes=../outcomes}}            {{> market_singleRow type=104 outcomes=../outcomes}}            {{> market_singleRow type=169 outcomes=../outcomes}}            {{> market_singleRow type=6832 outcomes=../outcomes}}            {{> market_singleRow type=7591 outcomes=../outcomes}}            <div id="markets-others" class="hidden">            </div>            <div id="markets-more" class="markets-box more hidden">                <span class="markets-text more">Outras &nbsp; <i class="fa fa-plus" aria-hidden="true"></i></span>            </div>        </div>    {{/each}}'),Handlebars.registerPartial("market_singleRow",'    {{#with (lookup (lookup this type) 0)}}        <div class="markets-box market title">            <span class="markets-text market title">{{market_type.name}}</span>        </div>        <table class="markets-table market">            {{> markets_headers type=../type outcomes=../outcomes}}            {{> market_selections type=../type fixture=.. index=@index}}        </table>    {{/with}}'),Handlebars.registerPartial("market_multiRow",'    {{#with (lookup this type)}}        <div class="markets-box market title">            <span class="markets-text market title">{{this.[0].market_type.name}}</span>        </div>        <table class="markets-table market">            {{#each this}}                {{#if_eq @index 0}}                    {{> markets_headers type=../../type fixture=../.. outcomes=../../outcomes}}                {{/if_eq}}                {{> market_selections type=../../type fixture=../.. index=@index}}            {{/each}}        </table>    {{/with}}'),Handlebars.registerPartial("market_selections",'    {{#if_in type "2,306,832,,6832,7591"}}        {{> market_selections_triple outcome1=1 outcome2=2 outcome3=3}}    {{/if_in}}    {{#if_in type "122,60,62,104,169"}}        {{> market_selections_double outcome1=1 outcome2=3}}    {{/if_in}}    {{#if_eq type 7202}}        {{> market_selections_triple outcome1=7 outcome2=8 outcome3=9}}    {{/if_eq}}    {{#if_eq type 25}}        {{> market_selections_triple outcome1=27 outcome2=28 outcome3=29}}    {{/if_eq}}    {{#if_eq type 322}}        {{> market_selections_double outcome1=25 outcome2=26}}    {{/if_eq}}    {{#if_eq type 259}}        {{> market_selections_double outcome1=30 outcome2=31}}    {{/if_eq}}    {{#if_eq type 105}}        {{> market_selections_triple outcome1=4 outcome2=5 outcome3=6}}    {{/if_eq}}'),Handlebars.registerPartial("market_selections_triple",'    <tr class="markets-tr">        <td class="markets-td marketName">            {{#if_eq market_type.is_handicap 1}}                {{handicap}}            {{/if_eq}}        </td>        <th class="markets-td selection separator"></th>        {{> get_selection outcomeId=outcome1 market=this type="triple"}}        <td class="markets-td selection separator"></td>        {{> get_selection outcomeId=outcome2 market=this type="triple"}}        <td class="markets-td selection separator"></td>        {{> get_selection outcomeId=outcome3 market=this type="triple"}}    </tr>'),Handlebars.registerPartial("market_selections_double",'    <tr class="markets-tr">        <td class="markets-td marketName">            {{#if_eq market_type.is_handicap 1}}                {{handicap}}            {{/if_eq}}        </td>        <th class="markets-td selection separator"></th>        {{> get_selection outcomeId=outcome1 market=this type="double"}}        <td class="markets-td selection separator"></td>        {{> get_selection outcomeId=outcome2 market=this type="double"}}    </tr>'),Handlebars.registerPartial("markets_headers",'    <tr class="markets-tr">        <th class="markets-th marketName"></th>        {{#if_in type "2,306,6832,7591"}}            {{> market_header_triple outcome1=1 outcome2=2 outcome3=3}}        {{/if_in}}        {{#if_eq type 322}}            {{> market_header_double outcome1=25 outcome2=26}}        {{/if_eq}}        {{#if_in type "122,60,62,104,169"}}            {{> market_header_double outcome1=1 outcome2=3}}        {{/if_in}}        {{#if_eq type 7202}}            {{> market_header_triple outcome1=7 outcome2=8 outcome3=9}}        {{/if_eq}}        {{#if_eq type 25}}            {{> market_header_triple outcome1=27 outcome2=28 outcome3=29}}        {{/if_eq}}        {{#if_eq type 105}}            {{> market_header_triple outcome1=4 outcome2=5 outcome3=6}}        {{/if_eq}}        {{#if_eq type 259}}            {{> market_header_double outcome1=30 outcome2=31}}        {{/if_eq}}    </tr>'),Handlebars.registerPartial("market_header_triple",'    <th class="markets-th selection separator"></th>    <th class="markets-th selection triple">{{> get_selection_name outcome=outcome1}}</th>    <th class="markets-th selection separator"></th>    <th class="markets-th selection triple">{{> get_selection_name outcome=outcome2}}</th>    <th class="markets-th selection separator"></th>    <th class="markets-th selection triple">{{> get_selection_name outcome=outcome3}}</th>'),Handlebars.registerPartial("market_header_double",'    <th class="markets-th selection separator"></th>    <th class="markets-th selection double">{{> get_selection_name outcome=outcome1}}</th>    <th class="markets-th selection separator"></th>    <th class="markets-th selection double">{{> get_selection_name outcome=outcome2}}</th>'),Handlebars.registerPartial("markets_header",'    {{> markets_header_navigation}}    <div class="markets-header hidden">        <span class="markets-text-title">{{sport}}</span>        <select id="markets-select" class="markets-select">            {{#each markets}}                <option value="{{market_type.id}}">{{market_type.name}}</option>            {{/each}}        </select>    </div>'),Handlebars.registerPartial("betslip_simple",'    <div id="betslip-simpleBet-box-{{id}}" class="betslip-box bet">        <div class="betslip-box row">            <button id="betslip-simpleBet-button-removeBet-{{id}}" class="betslip-button remove"><i class="fa fa-times" aria-hidden="true"></i></button>            <span class="betslip-text gameName">{{date}} - {{time}}<br>{{gameName}}</span>        </div>        <div class="betslip-box row">            <span class="betslip-text marketName">{{marketName}}</span>            <div class="pull-right">€ <input id="betslip-field-amount-{{id}}" type="text" class="betslip-field amount" value="{{amount}}" data-id="{{id}}"></div>        </div>        <div class="acenter">            <span id="simpleBet-text-error-{{id}}" class="betslip-text error"></span>        </div class="betslip-box row">        <div class="betslip-box row">            <span class="betslip-text eventName">{{name}}</span>            <span class="betslip-text odds">{{odds}}</span>        </div>        <div  class="betslip-box row">            <span class="betslip-text profit">Possível Retorno</span>            <span id="betslip-text-profit-{{id}}" class="betslip-text profit amount">€ {{multiply amount odds}}</span>        </div>    </div>'),Handlebars.registerPartial("betslip_multi",'    <div id="betslip-multiBet-box-{{id}}" class="betslip-box event">        <div class="betslip-box row">            <button id="betslip-multiBet-button-removeBet-{{id}}" class="betslip-button remove"><i class="fa fa-times" aria-hidden="true"></i></button>            <span class="betslip-text gameName">{{date}} - {{time}}<br>{{gameName}}</span>        </div>        <div class="betslip-box row">            <span class="betslip-text marketName">{{marketName}}</span>        </div>        <div class="acenter">            <span id="multiBet-text-error-{{id}}" class="betslip-text error"></span>        </div>        <div class="betslip-box row">            <span class="betslip-text eventName">{{name}}</span>            <span class="betslip-text odds">{{odds}}</span>        </div>    </div>'),Handlebars.registerPartial("betslip_open_bets",'    {{#each bets}}        <div class="betslip-box bet">            {{#each events}}                <div class="betslip-box row">                    <span class="betslip-text gameName">{{date}} - {{time}}<br>{{game_name}}</span>                    {{#if_eq ../type "simple"}}                        <span class="betslip-text amount">€ {{../amount}}</span>                    {{/if_eq}}                </div>                <div class="betslip-box row">                    <span class="betslip-text marketName">{{market_name}}</span>                </div>                <div class="betslip-box row">                    <span class="betslip-text eventName">{{event_name}}</span>                    <span class="betslip-text odds">                    {{#if_eq status "won"}}                        <span class="betslip-text win"><i class="fa fa-check-circle" aria-hidden="true"></i> &nbsp;</span>                    {{/if_eq}}                    {{odd}}                    </span>                </div>            {{/each}}            {{#if_eq type "multi"}}                <div class="betslip-box row">                    <span class="betslip-text amountLabel">Total Apostas</span>                    <span id="betslip-simpleProfit" class="betslip-text profit amount white"> € {{amount}}</span>                </div>                <div class="betslip-box row">                    <span class="betslip-text oddsLabel">Total Odds</span>                    <span id="betslip-multiOdds" class="betslip-text profit amount white">{{odd}}</span>                </div>            {{/if_eq}}            <div class="betslip-box row">                <span class="betslip-text profit white">Possível retorno</span>                <span class="betslip-text profit amount white">€ {{multiply amount odd}}</span>            </div>        </div>    {{/each}}');var SportsMenu=new function(){function t(){x=encodeURIComponent(moment.utc().add(1,"years").format()),(new Spinner).spin(document.getElementById("sportsSpinner")),(new Spinner).spin(document.getElementById("highlightsSpinner")),$("#sportsMenu-interval").click(e),$(".sportsMenu-container div[data-interval]").click(s),a()}function e(){var t=$(this).find("span i");t.toggleClass("fa-plus"),t.toggleClass("fa-caret-down"),t.toggleClass("collapse"),$(this).toggleClass("selected"),$("#sportsMenu-interval-content").toggleClass("hidden")}function s(){$("#sportsMenu-interval-text").html($(this).find("span").html());var t=$(this).data("interval"),e="today"==t?moment.utc().add(1,"days").hours(0).minutes(0).seconds(0).format():moment.utc().add(t,"hours").format();e=encodeURIComponent(e),Markets.makeUntil(e),$("#sportsMenu-interval-content").toggleClass("hidden")}function a(){i()}function i(){$.get("/odds/sports?until"+x).done(n)}function n(t){$("#sportsMenu-popular").html(Template.apply("sports_menu",t)),o()}function o(){$(".menu1-option").click(r)}function r(){var t=""===$(this).next().html();if(!t||!$(this).hasClass("selected")){var e=$(this).data("sport-id");t&&d(e),l.call(this)}}function l(){$(this).toggleClass("selected"),$(this).parent().find(".level2").toggleClass("hidden");var t=$(this).find("span i");t.toggleClass("fa-plus"),t.toggleClass("fa-caret-down"),t.toggleClass("collapse")}function d(t){$.get("/odds/regions?sport="+t+"&until="+x).done(function(e){m(e,t)})}function m(t,e){var s=$("#sportsMenu-popular").find("div[data-sport-id="+e+"]").next();s.html(Template.apply("regions_submenu",t)),c(s,e)}function c(t,e){t.find(".menu2-option").click(function(){p.call(this,e)})}function p(t){var e=""===$(this).next().html();if(!e||!$(this).hasClass("selected")){var s=$(this).data("region-id");e&&f(t,s),u.call(this)}}function u(){$(this).parent().find(".level3").toggleClass("hidden"),$(this).find(".i2").toggleClass("hidden"),$(this).find(".sportsMenu-text-region.count").toggleClass("hidden"),$(this).find(".n2").toggleClass("selected")}function f(t,e){$.get("/odds/competitions?sport="+t+"&region="+e).done(function(s){h(s,t,e)})}function h(t,e,s){var a=$("#sportsMenu-popular").find("div[data-sport-id="+e+"]").next().find("div[data-region-id="+s+"]").next();a.html(Template.apply("competitions_submenu",t)),$(a).find(".menu3-option").click(b)}function b(){$(".n3").removeClass("selected"),$(".i3").addClass("hidden"),$(this).find(".i3").removeClass("hidden"),$(this).find(".n3").addClass("selected"),competitionId=$(this).parent().data("competition-id"),Markets.make(v.call(this))}function v(){var t=$(this).parent(),e=t.parent().prev(),s=e.parent().parent().prev();return{competition:t.data("competition-name"),competitionId:t.data("competition-id"),region:e.data("region-name"),sport:s.data("sport-name")}}function k(t){return 0==t.length?void $("#highlights-container").html(""):void $.get("/odds/competitions?ids="+t.join(",")).done(g)}function g(t){var e=$("#highlights-container");e.html(Template.apply("highlights_submenu",t)),e.find("div[data-type=highlight]").click(_)}function _(){Markets.makeHighlight({competition:$(this).data("competition-name"),competitionId:$(this).data("competition-id")})}var x;t(),this.make=function(){a()},this.makeHighlights=function(t){k(t)}},Markets=new function(){function t(){(new Spinner).spin(document.getElementById("marketsSpinner")),e(a(w))}function e(t){s(),o(t)}function s(){$("#markets-header-container").html(Template.apply("markets_navigation",w))}function a(){return"competition="+w.competitionId}function i(){var t=[],e=Favorites.games();for(var s in e)t.push(e[s].id);return"ids="+t.join(",")}function n(t){return"query="+t}function o(t){$.get("/odds/fixtures?"+t+"&marketType=2&orderBy=start_time_utc,asc&until="+w.until+"&marketsCount="+M).done(r)}function r(t){l(t);var e=$("#markets-content");e.html(Template.apply("fixtures",t)),u(e),e.find("[data-type='fixture']").click(f),e.find("[data-type='odds']").click(_),e.find("[data-type='favorite']").click(x),Favorites.apply(),b()}function l(t){var e=t.fixtures;for(var s in e)d(e[s]);t.outcomes=q}function d(t){t.date=moment.utc(t.start_time_utc).local().format("DD MMM"),t.time=moment.utc(t.start_time_utc).local().format("HH:mm"),c(t),m(t)}function m(t){var e=t.markets;for(var s in e){var a=e[s];t[a.market_type_id]||(t[a.market_type_id]=[]),t[a.market_type_id].push(a)}}function c(t){var e=t.markets;for(var s in e)p(e[s]);return q}function p(t){var e=t.selections;for(var s in e){var a=e[s].outcome;a&&(q[a.id]=a.name)}}function u(t){var e=Betslip.bets();for(var s in e)t.find("[data-event-id='"+e[s].id+"']").addClass("selected")}function f(){var t=$(this).data("game-id");return C==t?void v():(C=t,void $.get("/odds/fixtures?ids="+C+"&withMarketTypes="+M).done(h))}function h(t){g(t),l(t,!0);var e=$("#markets-fixtureMarketsContainer");e.html(Template.apply("fixture_markets",t)),e.find("[data-type='odds']").click(_),u(e),$("#markets-hide").click(b),e.find("#markets-more").click(k),v()}function b(){$("#markets-fixturesContainer").removeClass("hidden"),$("#markets-fixtureMarketsContainer").addClass("hidden")}function v(){$("#markets-fixturesContainer").addClass("hidden"),$("#markets-fixtureMarketsContainer").removeClass("hidden")}function k(){$(this).addClass("hidden"),$("#markets-others").removeClass("hidden")}function g(t){t.sport=w.sport,t.region=w.region,t.competition=w.competition,t.now=moment().format("DD MMM HH:mm")}function _(){Betslip.toggle.call(this,{id:$(this).data("event-id"),name:$(this).data("event-name"),odds:$(this).data("event-price"),marketId:$(this).data("market-id"),marketName:$(this).data("market-name"),gameId:$(this).data("game-id"),gameName:$(this).data("game-name"),gameDate:$(this).data("game-date"),amount:0})}function x(){Favorites.toggle.call(this)}function y(t){for(var e in t)w[e]=t[e]}var C,w={sport:"Futebol",region:"Europa",competition:"UEFA European Football Championship",competitionId:51,until:encodeURIComponent(moment.utc().add(1,"years").format()),operation:"Competition"},q={},M="2,306,322,259,105,122,7202,25,60,62,104,169,6832,7591";t(),this.make=function(t){t&&y(t),w.operation="Competition",e(a(w))},this.makeUntil=function(t){w.until=t?t:encodeURIComponent(moment.utc().add(1,"years").format()),e(a(w))},this.makeFavorites=function(){w.operation="Favoritos",e(i())},this.makeQuery=function(t){w.operation="Pesquisa",w.query=t,e(n(t))},this.makeHighlight=function(t){w.operation="Destaques",y(t),e(a(w))}},Betslip=new function(){function t(){T(),$("#betslip-bulletinTab").click(e),$("#betslip-openBetsTab").click(s),$("#betslip-simpleTab").click(w),$("#betslip-multiTab").click(q),$("#betslip-multiAmount").on("keyup",c),$(window).unload(P),$("#betslip-submit").click(H),$("#betslip-login").click(X)}function e(){$("#betslip-bulletinTab").addClass("selected"),$("#betslip-openBetsTab").removeClass("selected"),$("#betslip-bulletinContainer").removeClass("hidden"),$("#betslip-openBetsContainer").addClass("hidden")}function s(){$.get("/open-bets").done(a)}function a(t){0!=t.bets.length&&(i(t),$("#betslip-openBetsContainer").html(Template.apply("betslip_open_bets",t)),$("#betslip-bulletinTab").removeClass("selected"),$("#betslip-openBetsTab").addClass("selected"),$("#betslip-bulletinContainer").addClass("hidden"),$("#betslip-openBetsContainer").removeClass("hidden"))}function i(t){var e=t.bets;for(var s in e)n(e[s].events)}function n(t){for(var e in t)o(t[e],"game_date")}function o(t,e){t.date=moment.utc(t[e]).local().format("DD MMM"),t.time=moment.utc(t[e]).local().format("HH:mm")}function r(t){_(t)&&($("button[data-event-id='"+t.id+"']").addClass("selected"),z.push(t),l(t),x("add"),p())}function l(t){d(t),$("#betslip-simpleContent").append(Template.apply("betslip_simple",t)),$("#betslip-simpleBet-button-removeBet-"+t.id).click(function(){v(h(t.id))}),$("#betslip-field-amount-"+t.id).on("keyup",function(){m.call(this,t)}),$("#betslip-multiBets-content").append(Template.apply("betslip_multi",t)),$("#betslip-multiBet-button-removeBet-"+t.id).click(function(){v(h(t.id))})}function d(t){o(t,"gameDate")}function m(t){$(this).val(g($(this).val())),z[h(t.id)].amount=$(this).val(),$("#betslip-text-profit-"+t.id).html("€ "+(t.amount*t.odds).toFixed(2)),u()}function c(){var t=g($(this).val());$(this).val(t),K=t,f()}function p(){u(),f()}function u(){var t=0,e=0;for(var s in z)t+=1*z[s].amount,e+=z[s].amount*z[s].odds;$("#betslip-simpleCount").html(z.length),$("#betslip-simpleTotal").html("€ "+t.toFixed(2)),$("#betslip-simpleProfit").html("€ "+e.toFixed(2))}function f(){for(var t=1,e=0;e<z.length;e++)t*=z[e].odds;$("#betslip-multiOdds").html(t.toFixed(2)),$("#betslip-multiProfit").html("€ "+(K*t).toFixed(2))}function h(t,e){for(var s=e?e:"id",a=0;a<z.length;a++)if(z[a][s]==t)return a;return-1}function b(t,e){return h(t,e)>-1}function v(t){var e=z[t];$("button[data-event-id='"+e.id+"']").removeClass("selected"),$("#betslip-simpleBet-box-"+e.id).remove(),$("#betslip-multiBet-box-"+e.id).remove(),z.splice(t,1),x(),p()}function k(t){v(h(t))}function g(t){return 1*t.substr(0,3).replace(/\D/g,"")}function _(t){return"simple"==G||!b(t.gameId,"gameId")}function x(t){0==z.length&&B(),1==z.length&&y();var e=$("#betslip-multiTab");return!C()&&z.length>1?(e.prop("disabled",!1),void(2===z.length&&"add"==t&&e.click())):void $("#betslip-simpleTab").click()}function y(){$("#betslip-noBets").addClass("hidden"),$("#betslip-simpleFooter").removeClass("hidden"),$("#betslip-multiFooter").removeClass("hidden"),$("#betslip-submit").prop("disabled",!1)}function C(){for(var t={},e=0;e<z.length;e++){if(t[z[e].gameId])return!0;t[z[e].gameId]=!0}return!1}function w(){$(this).addClass("selected");var t=$(this).find("i");t.removeClass("fa-plus"),t.addClass("fa-caret-down"),t.removeClass("inactive"),t.addClass("active");var e=$("#betslip-multiTab"),s=e.find("i");s.removeClass("fa-caret-down"),s.addClass("fa-plus"),s.removeClass("active"),s.addClass("inactive"),e.removeClass("selected"),$("#betslip-simpleContainer").removeClass("hidden"),$("#betslip-multiContainer").addClass("hidden"),G="simple"}function q(){if(!(C()||z.length<2)){var t=$("#betslip-simpleTab"),e=t.find("i");e.removeClass("fa-caret-down"),e.addClass("fa-plus"),e.addClass("inactive"),e.removeClass("active");var s=$(this).find("i");s.removeClass("fa-plus"),s.addClass("fa-caret-down"),s.addClass("active"),s.removeClass("inactive"),$(this).addClass("selected"),t.removeClass("selected"),$("#betslip-multiContainer").removeClass("hidden"),$("#betslip-simpleContainer").addClass("hidden"),G="multi"}}function M(){z=[],$("#betslip-simpleContent").html(""),$("#betslip-multiBets-content").html(""),$(".markets-button").removeClass("selected"),B()}function B(){$("#betslip-noBets").removeClass("hidden"),$("#betslip-simpleFooter").addClass("hidden"),$("#betslip-multiFooter").addClass("hidden"),$("#multiBet-text-error").html(""),$("#betslip-simpleTab").click(),$("#betslip-submit").prop("disabled",!0),K=0,$("#betslip-multiAmount").val(K)}function P(){Cookies.set("bets",z,{expires:30})}function T(){var t=Cookies.getJSON("bets");if(t)for(var e=0;e<t.length;e++)r(t[e])}function H(){j(),$.post("/desporto/betslip",I()).done(N).fail(L).always(Q)}function I(){var t={bets:[]};return"multi"===G?F(t):R(t)}function F(t){return t.bets.push({rid:"multi",type:G,amount:parseInt(K),events:z}),t}function R(t){for(var e in z)t.bets.push({rid:z[e].id,type:"simple",amount:z[e].amount,events:[z[e]]});return t}function N(t){var e=t.bets;for(var s in e){var a=e[s];if("multi"===a.rid)return void S(a);O(a)}}function S(t){0===t.code?D():A(t.errorMsg)}function D(){var t='<div id="betslip-multiBet-success" class="bets-box vmargin-small"><p class="betSuccess">Aposta submetida com sucesso</p></div>';$("#betslip-multiBets-content").html(t),$("#betslip-multiFooter").addClass("hidden"),setTimeout(function(){M(),$("#betslip-multiBet-success").remove()},2e3)}function A(t){$("#multiBet-text-error").html(t)}function O(t){0===t.code?U(t.rid):E(t)}function U(t){$("#betslip-simpleBet-box-"+t).html('<p class="betSuccess">Aposta submetida com sucesso</p>'),setTimeout(function(){k(t)},2e3)}function E(t){$("#simpleBet-text-error-"+t.rid).html(t.errorMsg)}function j(){var t=$("#betslip-submit");t.prop("disabled",!0),t.html("Aguarde...")}function J(){setTimeout(function(){var t=$("#betslip-submit");t.prop("disabled",0==z.length),t.html("EFECTUAR APOSTA")},2100)}function L(){alert("O serviço de apostas não está disponível.")}function Q(){J()}function X(){var t=$("#user-login"),e=$("#pass-login");t.val()?e.val()?$("#submit-login").click():e.focus():t.focus()}var z=[],G="simple",K=0;t(),this.toggle=function(t){var e=h(t.id);return e>-1?void v(e):void r(t)},this.bets=function(){return z},this.enableSubmit=function(){J()}},Favorites=new function(){function t(){i(),$("#btnFavorites").click(r),$(window).unload(n)}function e(t){for(var e in l)if(l[e].id==t)return!0;return!1}function s(){l.push({id:$(this).data("game-id"),name:$(this).data("game-name"),date:$(this).data("game-date")})}function a(t){for(var e in l)l[e].id==t&&l.splice(e,1)}function i(){var t=Cookies.getJSON("favorites");t&&o()}function n(){Cookies.set("favorites",l,{expires:30})}function o(){for(var t in l)$("#favorite-button-"+l[t].id).addClass("selected")}function r(t){return l.length&&Markets.makeFavorites(),t.preventDefault(),!1}var l=Cookies.getJSON("favorites")||[];t(),this.toggle=function(){$(this).toggleClass("selected");var t=$(this).data("game-id");e(t)?a(t):s.call(this)},this.games=function(){return l},this.apply=function(){o()}},Search=new function(){function t(){$("#textSearch").change(e)}function e(){var t=$(this).val();return t.length<3?void alert("A pequisa necessita de pelo menos 3 caracteres."):void Markets.makeQuery($(this).val())}t()},Updater=new function(){function t(){setInterval(e,1e4)}function e(){for(var t=$("button[data-type=odds]"),e=[],a=0;a<t.length;a++)e.push($(t[a]).data("event-id"));e.length&&$.get("/odds/selections?ids="+e.join(",")+"&since=200").done(s)}function s(t){var e=t.selections;for(var s in e)a(e[s])}function a(t){var e=$("button[data-event-id="+t.id+"]");if(e.data("event-price")!=t.decimal){
var s=e.data("event-price")>t.decimal?"updated-down":"updated-up";e.addClass(s),e.data("event-price",t.decimal),e.html(t.decimal),setTimeout(function(){e.removeClass(s)},500)}}t()};